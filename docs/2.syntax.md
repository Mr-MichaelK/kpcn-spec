# Syntax Specification
<u>**Note:**</u> KPCN is case-sensitive. All language keywords must be written in uppercase.

## 1. Variable Declaration:

### Rule:
```VAR varName = value```

### Purpose:
To declare a local variable and assign it a value. The **VAR** keyword declares a variable by its name, while the = operator assigns it a value.

### Example:
```
VAR name = "Michael"
```

### Python Translation:
```python
name = "Michael"
```

## 2. Global Variables:

### Rule:
```GLOBAL VAR varName = value```

### Purpose:
To declare a global variable (can be accessed from anywhere) and assign it a value. The GLOBAL keyword is used to make a variable global upon its declaration. The GLOBAL keyword is used inside functions.

### Example:
```
GLOBAL VAR counter = 0
```

### Python Translation:
```python
# inside some function
global counter
counter = 0
```

## 3. Data Types:

Data types represent the kind of value a variable holds. In KPCN, data types are inferred automatically and do not need to be explicitly declared by the user. This keeps the syntax clean and intuitive.

KPCN data types fall into two main categories:

### Primitives:
Primitives are the basic building blocks of data. In KPCN, primitive types mirror those found in Python:

- Strings
- Numbers
- Booleans
- NULL

#### 1. Strings:
A string represents a sequence of text characters surrounded by double quotes ("").

In KPCN, a string variable may look as such:
```
VAR someString = "I am a string"
```

#### 2. Numbers:
A number represents both integers and floating point numbers.

In KPCN, number variables may look as such:
```
VAR age = 19
VAR PI = 3.14
```

#### 3. Booleans:
A boolean represents a logical value of either TRUE or FALSE.

In KPCN, boolean variables may look as such:
```
VAR isHungry = TRUE
VAR isFull = FALSE
```

#### 4. Null:
NULL is a special value representing the absence of data. It's useful for initializing variables before assigning real values:

In KPCN, we can create a NULL object as such:
```
VAR person = NULL
```

### Non-primitives:
Non-primitive data types are types defined by the programmer which represent real-world objects.

Some non-primitives such as lists, sets, and maps may be provided by the language itself.

For example, we can create a non-primitive type like the Student class which is defined using the CLASS keyword (more on that later) and instantiated with its CONSTRUCTOR function.

We declare such a variable like this:
```
VAR student1 = Student("Michael", 19)
```
which creates a new student whose name is Michael and age is 19. In this case, name and age would be attributes defined using the ATTRIBUTE keyword inside the student class.

## 4. Arithmetic Operators:
Arithmetic operators are used with numeric values to perform common mathematical operations. 

In this section we will discuss the arithmetic operators of KPCN (which are the same as those of Python):

### 1. The "+" Operator:
The "+" operator can be used for the addition of two numbers, and the concatenation of two strings.

Addition Example:
```
VAR x = 7
VAR y = 5
VAR ans = x + y
```
In this example, *ans* becomes 12.

Concatenation Example:
```
VAR greeting = "Hello"
VAR name = "Michael"
VAR greetingMessage = greeting + " " + name
```
In this example, *greetingMessage* is "Hello Michael".

### 2. The "-" Operator:
The "-" operator can be used for the subtraction of two numbers.

Example:
```
VAR x = 7
VAR y = 5
VAR ans = x - y
```
In this example, *ans* is 2.

### 3. The "*" Operator:
The "*" operator can be used for the multiplication of two numbers. It can be also used to repeat a string as many times as needed.

Multiplication Example:
```
VAR x = 7
VAR y = 5
VAR ans = x * y
```
In this example, *ans* becomes 35.

String Repetition Example:
```
VAR repeatedHello = "Hello" * 3
```
In this example, *repeatedHello* is "HelloHelloHello".

### 4. The "/" Operator:
The "/" operator can be used for the division of two numbers.

Example:
```
VAR x = 35
VAR y = 5
VAR ans = x / y
```
In this example, *ans* is 7.0

**Note:** The KPCN translator always uses Python's float division.

### 5. The "%" Operator:
The "%" operator is used to get the remainder of the division of two numbers.

Example:
```
VAR x = 7
VAR y = 5
VAR ans = x % y
```
In this example, *ans* is 2.

### 6. The "^" Operator:
The "^" operator is used to exponentiate a number by another number.

Example:
```
VAR x = 7
VAR y = 2
VAR ans = x ^ y
```
In this example, *ans* is 49.

## 5. Comparison Operators:
Comparison operators are used to compare two values to return a boolean. They always return either TRUE or FALSE.

The comparison operators in KPCN (which are the same as those in Python) are listed below:

### 1. The "==" Operator:
The "==" operator checks for the equality of two values. It could be used on all primitive types.

Example 1:
```
VAR name1 = "Sam"
VAR name2 = "Mike"
PRINT(name1 == name2)
```
This snippet returns FALSE since "Sam" is not equal to "Mike".

Example 2:
```
PRINT(10 == 10)
```
This snippet returns TRUE since 10 is equal to 10.

### 2. The "!=" Operator:
The "!=" operator checks for the inequality of two values. It could be used on all primitive types.

Example:
```
VAR isOverweight = FALSE
PRINT(isOverweight != FALSE)
```
This snippet returns FALSE since *isOverweight* is equal to FALSE.

### 3. The ">" Operator:
The ">" operator checks if the first number is greater than the second number. It could be used only on numbers.

Example:
```
PRINT(2 > 7)
```
This snippet returns FALSE since 2 is not greater than 7.

### 4. The ">=" Operator:
The ">=" operator checks if the first number is greater than or equal to the second number. It could be used only on numbers.

Example:
```
PRINT(7 >= 7)
```
This snippet returns TRUE since 7 is greater than or equal to 7.

### 5. The "<" Operator:
The "<" operator checks if the first number is less than the second number. It could be used only on numbers.

Example:
```
PRINT(1.3 < 1.33)
```
This snippet returns TRUE since 1.3 is less than 1.33

### 6. The "<=" Operator:
The "<=" operator checks if the first number is less than or equal to the second number. It could be used only on numbers.

Example:
```
PRINT(4 <= 1.33)
```
This snippet returns FALSE since 4 is neither less nor equal to 1.33

### 7. The IS Operator:
The IS operator is used to check if two operands refer to the exact same object in memory. It is equivalent to the Python *is* operator.

Example:
```
VAR s1 = "psst"
VAR s2 = s1
PRINT(s2 IS s1)
```
This snippet returns TRUE since *s2* points to the memory address of *s1*.

### 8. The IN Operator:
The IN operator is used to check if a certain value is inside an iterable object. It is equivalent to the Python *in* operator.

Example:
```
PRINT("ae" IN "Michael") // Outputs TRUE
PRINT("x" IN "Zebra")    // Outputs FALSE
```

## 6. Logical Operators:
Logical operators, also known as Boolean operators, evaluate multiple conditions and determine an expression's overall truth value. 

In KPCN, logical operators are made as close to English as possible. Below is a list of such operators:

### 1. The AND Operator:
The AND operator returns the logical "and" of two expressions.

Example:
```
VAR trueExp = TRUE
VAR falseExp = FALSE

PRINT(trueExp AND trueExp)   // prints TRUE
PRINT(trueExp AND falseExp)  // prints FALSE
PRINT(falseExp AND trueExp)  // prints FALSE
PRINT(falseExp AND falseExp) // prints FALSE
```

### 2. The OR Operator:
The OR operator returns the logical "or" of two expressions.

Example:
```
VAR trueExp = TRUE
VAR falseExp = FALSE

PRINT(trueExp OR trueExp)   // prints TRUE
PRINT(trueExp OR falseExp)  // prints TRUE
PRINT(falseExp OR trueExp)  // prints TRUE
PRINT(falseExp OR falseExp) // prints FALSE
```

### 3. The XOR Operator:
The XOR (exclusive OR) operator returns TRUE if exactly one of the operands is TRUE, but FALSE if both are TRUE or both are FALSE.

Example:
```
VAR trueExp = TRUE
VAR falseExp = FALSE

PRINT(trueExp XOR trueExp)   // prints FALSE
PRINT(trueExp XOR falseExp)  // prints TRUE
PRINT(falseExp XOR trueExp)  // prints TRUE
PRINT(falseExp XOR falseExp) // prints FALSE
```

### 4. The NOT Operator:
The NOT operator returns the logical "not" of an expression.

Example:
```
VAR trueExp = TRUE
VAR falseExp = FALSE

PRINT(NOT trueExp)  // prints FALSE
PRINT(NOT falseExp) // prints TRUE
```

#### Note: Operator Precedence

Expressions are evaluated from left to right, respecting operator precedence. Like in Python, parentheses "()" have the highest precedence and can be used to override default order. The precedence of logical operators in KPCN is as follows, from highest to lowest:

1. NOT
2. AND
3. XOR
4. OR

## 7. Assignment Operators:
Assignment operators are used to assign a value to a variable. In KPCN, assignment operators are the same as those in Python.

### 1. The "=" Operator:
The "=" operator sets the value of the variable on the left-hand side to that on the right-hand side.

Example:
```
VAR x = 10
```
This assigns the value `10` to the variable `x`.

### 2. The "+=" Operator:
The "+=" operator adds the right-hand value to the left-hand variable and assigns the result to the variable.

Example:
```
VAR x = 10
x += 5
```

This updates `x` to 15.

### 3. The "-=" Operator:
The "-=" operator subtracts the right-hand value from the left-hand variable and assigns the result to the variable.

Example:
```
VAR x = 10
x -= 3
```

This updates `x` to 7.

### 4. The "*=" Operator:
The "*=" operator multiplies the left-hand variable by the right-hand value and assigns the result to the variable.

Example:
```
VAR x = 4
x *= 2
```

This updates `x` to 8.

### 5. The "/=" Operator:
The "/=" operator divides the left-hand variable by the right-hand value and assigns the result to the variable.

Example:
```
VAR x = 20
x /= 4
```

This updates `x` to 5.

### 6. The "%=" Operator:
The "%=" operator takes the modulus (remainder) of the left-hand variable divided by the right-hand value and assigns the result to the variable.

Example:
```
VAR x = 10
x %= 4
```

This updates `x` to 2.

### 7. The "^=" Operator:
The "^=" operator raises the left-hand variable to the power of the right-hand value and assigns the result to the variable.

Example:
```
VAR x = 3
x ^= 2
```

This updates `x` to 9.

## 8. Control Flow

Control flow determines the order in which instructions are executed based on given conditions.

In KPCN, this is handled using `IF`, `ELSE IF`, and `ELSE` statements. A condition is placed inside an `IF` statement and evaluated. If the condition is `TRUE`, the block of code under the `IF` executes. 

If the condition is `FALSE`, KPCN checks any following `ELSE IF` statements. If one of them evaluates to `TRUE`, its corresponding block runs. If none of the conditions are true and there is an `ELSE` block at the end, that block is executed. If there is no `ELSE` block, the program simply continues execution after the control structure.

Example 1:
```
VAR isHungry = TRUE

IF isHungry:
    // ask for food
    PRINT("I want food")

PRINT("I can't eat anymore")
```
In this snippet, the condition `isHungry` evaluates to TRUE, so we execute the indented block of code beneath it.

After we finish executing the indented block of code, we continue normal code execution (anything outside the control structure).

With that, the output in this snippet is:

```
I want food
I can't eat anymore
```

Example 2:
```
VAR age = 17

IF age >= 18:
    PRINT("You can enlist in the army.")
ELSE:
    PRINT("You are underage.")
```
In this snippet, age is less than and not equal to 18, so the `IF` statement evaluates to `FALSE`, and the `ELSE` statement is executed instead.

The output is `You are underage.`

Example 3:
```
VAR GPA = 3.6

IF GPA >= 3.8:
    PRINT("High Distinction")
ELSE IF GPA >= 3.5:
    PRINT("Distinction")
ELSE:
    PRINT("Normal Graduation")

PRINT("Congratulations!")
```
In this snippet, GPA is less than and not equal to 3.8, so the `IF` statement evaluates to `FALSE`, and we skip to evaluate the `ELSE IF` statement beneath it.

Since GPA is greater than 3.5, the indented code beneath the ELSE IF statement is executed.

Afterwards, the code outside the control structure is executed.

The final output is:

```
Distinction
Congratulations!
```

## Looping Constructs:

A looping mechanism is needed to repeat a set of instructions until a certain condition is met. KPCN supports 3 kinds of loops:

### 1. FOR Loop:
A `for loop` is used to iterate over a range of numbers. The `for loop` requires 2 parameters, the start number and the end number. 

A range based for loop has the below structure:
```
FOR varName FROM startNumber TO endNumber STEP someNumber:
    // repeat the indented block of code
```
where `varName` is the name of the variable that starts at `startNumber` and ends right before reaching `endNumber`. This is because the `TO` keyword is exclusive, meaning the loop stops before reaching `endNumber`.

When `startNumber` < `endNumber`, `varName` gets incremented each iteration by `someNumber` specified after `STEP`. 

When `startNumber` > `endNumber`, `varName` gets decremented each iteration by `someNumber` specified after `STEP`. 

It is also possible to omit the `STEP` altogether:
```
FOR varName FROM startNumber TO endNumber:
    // repeat the indented block of code
```
where when `startNumber` < `endNumber`, `varName` gets incremented by 1 each iteration until it reaches `endNumber`, whereas when `startNumber` > `endNumber`, `varName` gets decremented by 1 each iteration until it reaches `endNumber`.

Example 1: Sum of First 5 Even Integers

```
VAR summation = 0
FOR i FROM 0 TO 10 STEP 2:
    summation += i

PRINT(summation)
```

Python Translation:

```python
summation = 0
for i in range(0, 10, 2):
    summation += i

print(summation)
```

Example 2: Factorial of a Number

```
VAR num = 7
VAR factorial = 1
FOR i FROM num TO 0:
    factorial *= i

PRINT(factorial)
```

Python Translation:

```python
num = 7
factorial = 1
for i in range(7, 0, -1):
    factorial *= i

print(factorial)
```

**Note:** The translator automatically infers the negative `STEP` when `startNumber` > `endNumber`. 

Moreover, if the loop direction (inferred or specified using STEP) moves away from the end value, the loop body will not run. This is because the translator relies on Python’s range(...) behavior, which produces an empty sequence in that case.

Example:

```
FOR i FROM 0 TO 10 STEP -1:
    PRINT(i)
```

is translated to:

```python
for i in range(0, 10, -1):
    print(i)
```

Here, Python skips the loop since we start at 0 but keep decrementing by 1 which makes it impossible to reach 10.

### FOR EACH Loop:

A `for each loop` is used to iterate over the elements of an iterable object such as a string, list, map, or set.

A `for each loop` has the below structure:

```
FOR EACH varName IN iterableObjectName:
    // execute the indented block of code
```
Here, `varName` represents the current item in the iteration, and `iterableObjectName` is the object being looped over.

Example 1: Counting the Number of Vowels in a String

```
VAR vowels = ['a', 'o', 'u', 'e', 'i', 'y']
VAR s = "mighty"
VAR counter = 0

FOR EACH c IN s:
    IF c IN vowels:
        counter += 1

PRINT(counter) // outputs 2
```

Python Translation:
```python
vowels = ['a', 'o', 'u', 'e', 'i', 'y']
s = "mighty"
counter = 0

for c in s:
    if c in vowels:
        counter += 1

print(counter)
```

Example 2: Sum of Elements in a List:

```
VAR numbers = [12, 4, -3, 25, 0, -7]
VAR summation = 0

FOR EACH num IN numbers:
    summation += num

PRINT(summation)
```

Python Translation:

```python
numbers = [12, 4, -3, 25, 0, -7]
summation = 0

for num in numbers:
    summation += num

print(summation)
```

### WHILE Loop:

A `While loop` is a loop that keeps repeating as long as a condition is true. 

A `While loop` has the below structure:
```
WHILE condition:
    // execute indented block of code
```
where `condition` is a boolean which is evaluated each iteration.

Example: Guessing Game

```
VAR secretNumber = 7
VAR guess = INPUT() // read an integer from user

WHILE guess != secretNumber:
    PRINT("Wrong! Guess again.")
    guess = INPUT()

PRINT("Correct! Thanks for playing!")
```

Python Translation:

```python
secretNumber = 7
guess = int(input())

while guess != secretNumber:
    print("Wrong! Guess again.")
    guess = int(input())

print("Correct! Thanks for playing!")
```